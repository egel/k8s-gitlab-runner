# GitLab connection
gitlabUrl: https://gitlab.com/ # or your self-hosted URL
runnerToken: "glrt-YOUR_TOKEN_HERE" # ⚠️ Replace this!

# Runner image
image:
  registry: docker.io
  image: gitlab/gitlab-runner
  tag: bleeding

# Scaling
replicas: 2 # 2 manager pods for HA
concurrent: 4 # Each manager handles 10 jobs max

# Kubernetes executor config
runners:
  config: |
    [[runners]]
      [runners.kubernetes]
        namespace = "{{.Release.Namespace}}"
        image = "alpine:latest"

        # Resource limits (per job pod)
        cpu_limit = "1"
        memory_limit = "4Gi"
        cpu_request = "500m"
        memory_request = "512Mi"

        # Service containers (e.g., DinD)
        service_cpu_limit = "1"
        service_memory_limit = "4Gi"
        # Enable privileged mode (needed for Docker-in-Docker)
        privileged = true
